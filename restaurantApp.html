<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant App Tracker</title>
</head>
<body>
    <div class="container">
        <form onsubmit="saveToLocalStorage(event)">

        <label>Choose Price: </label>
        <input id="price" type="tel" name="price" placeholder="Enter price" required/>

        <br><br>

        <label>Choose Dish: </label>
        <input id="dish" type="text" name="dish" placeholder="Dish" required/>

        <br><br>


        <label>Choose Table:</label>
        <select id="Table">
            <option value="option1">Table 1</option>
            <option value="option2">Table 2</option>
            <option value="option3">Table 3</option>
            <option value="option3">Table 4</option>
        </select>

        <br><br>
                <button>Add To Bill</button>
        <br><br>

        <h1>Orders</h1>

        <h2>Table 1</h2>

        <h2>Table 2</h2>

        <h2>Table 3</h2>

        <h2>Table 4</h2>

        <ul id="ListOfDish"></ul>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.4/axios.min.js"></script>

        <script>
            function saveToLocalStorage(event){
                event.preventDefault();

                const price = event.target.price.value;
                const dish = event.target.dish.value;
                const table = event.target.table.value;

                const obj = {
                    price,
                    dish,
                    table
                }

                axios.post("https://crudcrud.com/api/8e32bf5cabf8454ea17cc7e5183ddff6/restaurantApp", obj)
                .then((response) => {
                    showNewDishesOnScreen (response.data)

                    console.log(response)
                })

                .catch((err) => {
                    document.body.innerHTML = document.body.innerHTML + "<h4>Something went wrong</h4>"
                    console.log(err)
                })
            }

            window.addEventListener("DOMContentLoaded", () => {
                axios.get("https://crudcrud.com/api/8e32bf5cabf8454ea17cc7e5183ddff6/restaurantApp")
                .then((response) => {
                    const data = response.data;
                    for (let i = 0; i < data.length; i++) {
                        showNewDishesOnScreen(data[i]);
                    }
                })
                .catch((err) => {
                    console.log(err);
                });
            })

            function showNewDishesOnScreen(user) {
                const parentElem = document.getElementById('ListOfDish');

                const childElem = document.createElement('li');
                childElem.id = user._id;
                childElem.textContent = `Price: ${user.price}, Dish: ${user.dish}, Table: ${user.table} `;
                
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => {
                    deleteUser(user._id);
                }

                const editButton = document.createElement('button');
                editButton.textContent = 'Edit';
                editButton.onclick = () => {
                    editUserDetails(user.email, user.name, user.phonenumber, user._id);
                }

                childElem.appendChild(deleteButton);
                childElem.appendChild(editButton);

                parentElem.appendChild(childElem);
            }

            function deleteUser(userId) {
                axios.delete(`https://crudcrud.com/api/8e32bf5cabf8454ea17cc7e5183ddff6/restaurantApp/${userId}`)
                .then((response) => {
                    removeUserFromScreen(userId);
                })
                .catch((err) => {
                    document.body.innerHTML = document.body.innerHTML + "<h4>Something went wrong</h4>"
                    console.log(err);
                });
            }


//             function editUserDetails(email, name, phonenumber, userId) {
//     document.getElementById('email').value = email;
//     document.getElementById('username').value = name;
//     document.getElementById('phonenumber').value = phonenumber || '';
//     deleteUser(userId);
// }


            function removeUserFromScreen(userId) {
                const parentNode = document.getElementById('listOfItems');
    const childNode = document.getElementById(userId);
    parentNode.removeChild(childNode);
            }

        

        </script>
    </body>
</html>  -->



 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant App Tracker</title>
</head>
<body>
    <div class="container">
        <form onsubmit="saveToLocalStorage(event)">

        <label>Choose Price: </label>
        <input id="price" type="tel" name="price" placeholder="Enter price" required/>

        <br><br>

        <label>Choose Dish: </label>
        <input id="dish" type="text" name="dish" placeholder="Dish" required/>

        <br><br>


        <label>Choose Table:</label>
        <select id="table">
            <option value="Table 1">Table 1</option>
            <option value="Table 2">Table 2</option>
            <option value="Table 3">Table 3</option>
            <option value="Table 4">Table 4</option>
        </select>

        <br><br>
                <button>Add To Bill</button>
        <br><br>

        <!-- <h1>Orders</h1>

        <h2>Table 1</h2>

        <h2>Table 2</h2>

        <h2>Table 3</h2>

        <h2>Table 4</h2> -->

        <ul id="ListOfDish">
            <h1>Orders</h1>

            <h2>Table 1</h2>
    
            <h2>Table 2</h2>
    
            <h2>Table 3</h2>
    
            <h2>Table 4</h2>
        </ul>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.4/axios.min.js"></script>

        <script>
            function saveToLocalStorage(event){
                event.preventDefault();

                const price = event.target.price.value;
                const dish = event.target.dish.value;
                const table = event.target.querySelector('#table').value;

                const obj = {
                    price,
                    dish,
                    table
                }

                axios.post("https://crudcrud.com/api/e50452cf3f74412f96e6c060366492a4/restaurantApp", obj)
                .then((response) => {
                    showNewDishesOnScreen (response.data)
                    event.target.reset();
                    console.log(response)
                })

                .catch((err) => {
                    document.body.innerHTML = document.body.innerHTML + "<h4>Something went wrong</h4>"
                    console.log(err)
                })
            }

            window.addEventListener("DOMContentLoaded", () => {
                axios.get("https://crudcrud.com/api/e50452cf3f74412f96e6c060366492a4/restaurantApp")
                .then((response) => {
                    const data = response.data;
                    for (let i = 0; i < data.length; i++) {
                        showNewDishesOnScreen(data[i]);
                    }
                })
                .catch((err) => {
                    console.log(err);
                });
            })

            function showNewDishesOnScreen(user) {
                

                const parentElem = document.getElementById('ListOfDish');

const childElem = document.createElement('li');
// const heading = document.createElement('h2');
childElem.id = user._id;
childElem.textContent = `Table: ${user.table} => Price: ${user.price},  Dish: ${user.dish}`;

// childElem.createTextNode(`Price: ${user.price}, Dish: ${user.dish}, Table: ${user.table} `)
        // "<h2>Table 1</h2>" + `Price: ${user.price}, Dish: ${user.dish}, Table: ${user.table} `;

const deleteButton = document.createElement('button');
deleteButton.textContent = 'Delete';
deleteButton.onclick = () => {
    deleteUser(user._id);
}

childElem.appendChild(deleteButton);
parentElem.appendChild(childElem);
            }

            function deleteUser(userId) {
                axios.delete(`https://crudcrud.com/api/e50452cf3f74412f96e6c060366492a4/restaurantApp/${userId}`)
    .then((response) => {
      removeUserFromScreen(userId);
    })
    .catch((err) => {
      document.body.innerHTML = document.body.innerHTML + "<h4>Something went wrong</h4>"
      console.log(err);
    });
            }
                  
            function removeUserFromScreen(userId) {
    //             const parentNode = document.getElementById('ListOfDish');
    // const childNode = document.getElementById(userId._id);
    // parentNode.removeChild(childNode);

    const element = document.getElementById(userId);
    if (element) {
        element.parentNode.removeChild(element);
    }
            }

        </script>
    </body>
</html>  


